from pickle import dump, load
from os import listdir
from os.path import join

with open('features.p', 'rb') as file:
    features = load(file)

paths = [join('feature_vectors', f) for f in listdir('feature_vectors')]
observations = []
for path in paths:
    with open(path, 'r') as file:
        observation = []
        lines = file.read().splitlines()
        for feature in features:
            if feature in lines:
                observation.append(1)
            else:
                observation.append(0)
        observations.append(observation)

with open('observations.p', 'wb') as file:
    dump(observations, file)
