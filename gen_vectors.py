from pickle import dump, load
from os import listdir
from os.path import join

with open('gen/features.p', 'rb') as file:
    features = load(file)
paths = [join('feature_vectors', f) for f in listdir('feature_vectors')]
observations = []
for i in range(len(paths)):
    path = paths[i]
    print('Observation ' + str(i) + ' of ' + str(len(paths)), path)
    with open(path, 'r') as file:
        observation = []
        lines = file.read().splitlines()
        for feature in features:
            if feature in lines:
                observation.append(1)
            else:
                observation.append(0)
        observations.append(observation)

with open('gen/observations.p', 'wb') as file:
    dump(observations, file)
